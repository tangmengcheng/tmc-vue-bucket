{"version":3,"file":"vue.js","sources":["../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function initState(vm) {\n    const opts = vm.$options\n    if (opts.data) {\n        initData(vm)\n    }\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data\n    data = typeof data === 'function' ? data.call(vm) : data\n}","import {\n    initState\n} from \"./state\"\n\n// 初始化\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        console.log('options', options)\n        // 在当前的实例上扩展一些属性$options $data...\n        // 为什么要定义这些属性？如果使用使用options的话，在其他扩展方法里拿不到。扩展一些属性，可以通过this拿到这个属性\n        // 为什么属性要以$开头，认为是Vue自己的属性。如果自己在data中用$定义变量，实例上拿不到的\n        const vm = this\n        vm.$options = options // 将用户的选项挂载实例上\n\n        // 初始化状态/数据（Vue中的状态：props、data、computed、methods、watch）\n        initState(vm)\n        // todo...模板编译、创建虚拟dom。。。\n    }\n}\n\n// 状态初始化，和初始化没什么关系，需拆分单独管理\n// function initState(vm) {\n//     const opts = vm.$options\n//     // if (opts.props)\n//     if (opts.data) {\n//         initData(vm)\n//     }\n// }\n// function initData(vm) {\n//     let data = vm.$options.data\n//     // data可以是对象或函数[根使用可以是对象也可以是函数；组件一定是函数]（Vue3解决了，认为都是函数）\n//     data = typeof data === 'function' ? data.call(vm) : data\n//     console.log('data', data)\n// }","// vue源码里没有直接使用class定义一个类。类的特点：将所有的方法都耦合在一起，功能越来越多，很难维护。vue在设计的时候使用构造函数，把扩展的内容挂载到原型上，放到不同的文件中，好维护。\n\nimport {\n    initMixin\n} from \"./init\"\n\nfunction Vue(options) {\n    this._init(options)\n}\n\n// 初始化\ninitMixin(Vue) // 扩展了init方法\n// Vue.prototype._init = function () {\n\n// }\n// 把原型上方法扩展成一个个的函数，通过函数的方式，在其原型上扩展功能\n\nexport default Vue"],"names":["initState","vm","opts","$options","data","initData","call","initMixin","Vue","prototype","_init","options","console","log"],"mappings":";;;;;;IAAO,SAASA,SAASA,CAACC,EAAE,EAAE;IAC1B,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAQ,CAAA;MACxB,IAAID,IAAI,CAACE,IAAI,EAAE;QACXC,QAAQ,CAACJ,EAAE,CAAC,CAAA;IAChB,GAAA;IACJ,CAAA;IAEA,SAASI,QAAQA,CAACJ,EAAE,EAAE;IAClB,EAAA,IAAIG,IAAI,GAAGH,EAAE,CAACE,QAAQ,CAACC,IAAI,CAAA;IAC3BA,EAAAA,IAAI,GAAG,OAAOA,IAAI,KAAK,UAAU,GAAGA,IAAI,CAACE,IAAI,CAACL,EAAE,CAAC,GAAGG,IAAI,CAAA;IAC5D;;ICNA;IACO,SAASG,SAASA,CAACC,GAAG,EAAE;IAC3BA,EAAAA,GAAG,CAACC,SAAS,CAACC,KAAK,GAAG,UAAUC,OAAO,EAAE;IACrCC,IAAAA,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,OAAO,CAAC,CAAA;IAC/B;IACA;IACA;QACA,IAAMV,EAAE,GAAG,IAAI,CAAA;IACfA,IAAAA,EAAE,CAACE,QAAQ,GAAGQ,OAAO,CAAC;;IAEtB;QACAX,SAAS,CAACC,EAAE,CAAC,CAAA;IACb;OACH,CAAA;IACL,CAAA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;ICjCA;IAMA,SAASO,GAAGA,CAACG,OAAO,EAAE;IAClB,EAAA,IAAI,CAACD,KAAK,CAACC,OAAO,CAAC,CAAA;IACvB,CAAA;;IAEA;IACAJ,SAAS,CAACC,GAAG,CAAC,CAAC;;;;;;;;"}